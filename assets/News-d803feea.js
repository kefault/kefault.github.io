import{_ as j,a as u,c,b as e,F as i,d as k,k as w,t as r,i as S,u as z,m as b,o as q,p as M,e as V,g as h,w as y,l as T,v as N,j as x}from"./index-4cd145f3.js";import{_ as B,a as I}from"./Footer-371a5778.js";import{_ as L}from"./Top-6d240367.js";const D={name:"Pagination",props:{pageConfig:{type:Object,require:!0,default(){return{pageSize:10,pageNo:0,total:0,pageTotal:0}}}},data(){return{showPageNo:8,currentPage:0}},methods:{prePage(){this.currentPage-=1,this.$emit("changeCurrentPage",this.currentPage)},nextPage(){this.currentPage+=1,this.$emit("changeCurrentPage",this.currentPage)},changeCurrentPage(l){this.currentPage=l,this.$emit("changeCurrentPage",this.currentPage)}},computed:{pageTotal(){const l=this.pageConfig;return l.pageTotal?l.pageTotal:l.pageSize&&l.total?Math.ceil(l.total/l.pageSize):0}},created:function(){this.currentPage=this.pageConfig.pageNo||0}},F={key:0,class:"pagination"},H=["disabled"],E=["onClick"],O=["onClick"],R=e("button",{disabled:!0},"···",-1),A=e("button",{disabled:!0},"···",-1),G=["onClick"],J=e("button",{disabled:!0},"···",-1),K={class:"active"},Q=e("button",{disabled:!0},"···",-1),U=["disabled"];function W(l,a,d,P,s,t){return d.pageConfig.total?(u(),c("div",F,[e("button",{onClick:a[0]||(a[0]=(...n)=>t.prePage&&t.prePage(...n)),disabled:s.currentPage===1},"上一页",8,H),t.pageTotal<=s.showPageNo?(u(!0),c(i,{key:0},k(t.pageTotal,n=>(u(),c("button",{onClick:C=>t.changeCurrentPage(n),class:w({active:n===s.currentPage}),key:n},r(n),11,E))),128)):s.currentPage<4?(u(),c(i,{key:1},[(u(),c(i,null,k(6,n=>e("button",{onClick:C=>t.changeCurrentPage(n),class:w({active:n===s.currentPage}),key:n},r(n),11,O)),64)),R,e("button",{onClick:a[1]||(a[1]=n=>t.changeCurrentPage(t.pageTotal))},r(t.pageTotal),1)],64)):s.currentPage>t.pageTotal-4?(u(),c(i,{key:2},[e("button",{onClick:a[2]||(a[2]=n=>t.changeCurrentPage(1))},"1"),A,(u(),c(i,null,k(6,n=>e("button",{onClick:C=>t.changeCurrentPage(n+(t.pageTotal-6)),class:w({active:n+(t.pageTotal-6)===s.currentPage}),key:n},r(n+(t.pageTotal-6)),11,G)),64))],64)):(u(),c(i,{key:3},[e("button",{onClick:a[3]||(a[3]=n=>t.changeCurrentPage(1))},"1"),J,e("button",{onClick:a[4]||(a[4]=n=>t.changeCurrentPage(s.currentPage-2))},r(s.currentPage-2),1),e("button",{onClick:a[5]||(a[5]=n=>t.changeCurrentPage(s.currentPage-1))},r(s.currentPage-1),1),e("button",K,r(s.currentPage),1),e("button",{onClick:a[6]||(a[6]=n=>t.changeCurrentPage(s.currentPage+1))},r(s.currentPage+1),1),e("button",{onClick:a[7]||(a[7]=n=>t.changeCurrentPage(s.currentPage+2))},r(s.currentPage+2),1),Q,e("button",{onClick:a[8]||(a[8]=n=>t.changeCurrentPage(t.pageTotal))},r(t.pageTotal),1)],64)),e("button",{onClick:a[9]||(a[9]=(...n)=>t.nextPage&&t.nextPage(...n)),disabled:s.currentPage===t.pageTotal},"下一页",8,U)])):S("",!0)}const X=j(D,[["render",W]]);const Y={class:"container-news wrapper"},Z={class:"path"},$=e("span",{class:"your"},"您的位置",-1),ee={class:"news-list"},te={class:"date"},ne=["href"],ae={class:"title"},se={class:"desc"},re={class:"pagination-wrapper"},oe={class:"news-content"},ue={class:"title"},ce={class:"date"},le=["innerHTML"],he={__name:"News",setup(l){const a=z(),d=b({}),P=b(1),s=b([]),t=b({total:1,pageSize:5,pageNo:1}),n=()=>{a.query.id?fetch("/src/assets/uploads/news/"+a.query.id+"/content.json").then(o=>o.json()).then(async o=>{const p=await fetch("/src/assets/uploads/news/"+a.query.id+"/detail.html");o.detail=await p.text(),d.value=o}):fetch("/src/assets/uploads/news.json").then(o=>o.json()).then(async o=>{const p=[],f=(P.value-1)*t.value.pageSize,g=P.value*t.value.pageSize;for(var _=0,m=0;_<o.length;_++)if(o[_].state>0){if(m>=f&&m<g){const v=await(await fetch("/src/assets/uploads/news/"+o[_].id+"/content.json")).json();p.push({title:v.title,desc:v.introduction,month:v.date.substr(0,7),day:v.date.substr(8,2),url:"#/news?id="+v.id})}m++}t.value.total=m,s.value=p})},C=o=>{P.value=o,n()};return q(()=>{n()}),M(a,()=>{n()}),(o,p)=>{const f=V("router-link");return u(),c(i,null,[h(B),h(L,{topImg:"/src/assets/images/news.jpeg",title:"善有善报"}),e("div",Y,[e("div",Z,[$,h(f,{to:"/home",class:"path-lv1"},{default:y(()=>[x("首页")]),_:1}),h(f,{to:"/news",class:"path-lv2"},{default:y(()=>[x("善有善报")]),_:1})]),T(e("div",ee,[(u(!0),c(i,null,k(s.value,(g,_)=>(u(),c("div",{class:"item",key:_},[e("div",te,[e("h2",null,r(g.day),1),e("span",null,r(g.month),1)]),e("a",{class:"detail",href:g.url},[e("div",ae,r(g.title),1),e("div",se,r(g.desc),1)],8,ne)]))),128)),e("div",re,[h(X,{"page-config":t.value,onChangeCurrentPage:C},null,8,["page-config"])])],512),[[N,!o.$route.query.id]]),T(e("div",oe,[e("div",ue,r(d.value.title),1),e("div",ce,"发布时间："+r(d.value.date),1),e("div",{class:"detail",innerHTML:d.value.detail},null,8,le)],512),[[N,o.$route.query.id]])]),h(I)],64)}}};export{he as default};
